<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奇門數據庫 - 己土玄學AI足球分析系統</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 奇門數據庫頁面專用樣式 */
        .database-header, .symbol-search, .symbol-categories, .pattern-details {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }

        .database-header {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
        }

        .database-header h1 {
            margin: 0;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .database-header .subtitle {
            opacity: 0.9;
            margin-top: 10px;
            font-size: 16px;
        }

        .symbol-count {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-left: 15px;
        }

        /* 搜索區域 */
        .search-box {
            position: relative;
            margin-bottom: 25px;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px 15px 50px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(155, 89, 182, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-color);
        }

        .search-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .search-tag {
            background: #f8f9fa;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .search-tag:hover {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        /* 符號分類 */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .symbol-category {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            transition: all 0.3s ease;
        }

        .symbol-category:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .category-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .symbol-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .symbol-item {
            background: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
            border: 1px solid transparent;
        }

        .symbol-item:hover {
            border-color: var(--accent-color);
            transform: scale(1.05);
        }

        .symbol-item.selected {
            border-color: var(--accent-color);
            background: rgba(155, 89, 182, 0.1);
        }

        .symbol-name {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
            font-size: 14px;
        }

        .symbol-category-badge {
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .category-good {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
        }

        .category-bad {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        .category-neutral {
            background: rgba(149, 165, 166, 0.1);
            color: var(--gray-color);
        }

        /* 符號詳情 */
        .pattern-details {
            min-height: 400px;
        }

        .detail-empty {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }

        .detail-empty i {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--border-color);
        }

        .detail-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .detail-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .detail-name {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0;
        }

        .detail-type {
            background: var(--accent-color);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        .detail-body {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .detail-body {
                grid-template-columns: 1fr;
            }
        }

        .detail-description {
            font-size: 16px;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .detail-attributes {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
        }

        .attributes-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .attributes-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .attributes-list li {
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .attributes-list li:last-child {
            border-bottom: none;
        }

        .attribute-icon {
            color: var(--accent-color);
            width: 20px;
        }

        /* 足球映射區域 */
        .football-mapping {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow-sm);
            border-left: 5px solid var(--secondary-color);
        }

        .mapping-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mapping-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .mapping-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }

        .mapping-label {
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 10px;
            font-size: 14px;
        }

        .mapping-value {
            font-size: 16px;
            color: var(--primary-color);
            line-height: 1.6;
        }

        /* 參數影響 */
        .param-impact {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow-sm);
            border-left: 5px solid var(--warning-color);
        }

        .impact-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .impact-values {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
        }

        .impact-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .impact-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .impact-value {
            font-size: 24px;
            font-weight: 700;
        }

        .impact-value.positive {
            color: var(--success-color);
        }

        .impact-value.negative {
            color: var(--danger-color);
        }

        .impact-value.neutral {
            color: var(--gray-color);
        }

        /* 示例格局 */
        .pattern-examples {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow-sm);
            border-left: 5px solid var(--success-color);
        }

        .examples-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .examples-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .example-item {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
        }

        .example-match {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .example-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* 響應式調整 */
        @media (max-width: 768px) {
            .database-header, .symbol-search, .symbol-categories, .pattern-details {
                padding: 20px;
            }
            
            .category-grid {
                grid-template-columns: 1fr;
            }
            
            .symbol-list {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .mapping-grid {
                grid-template-columns: 1fr;
            }
            
            .impact-values {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .database-header h1 {
                font-size: 22px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .symbol-count {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .symbol-list {
                grid-template-columns: 1fr;
            }
            
            .impact-values {
                grid-template-columns: 1fr;
            }
            
            .detail-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 返回導航 -->
        <div class="back-nav">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                返回主儀表板
            </a>
            <span class="nav-title">奇門數據庫系統</span>
        </div>

        <!-- 數據庫標題 -->
        <div class="database-header">
            <h1>
                <i class="fas fa-database"></i>
                奇門遁甲符號數據庫
                <span class="symbol-count">87種格局 · 28種符號</span>
            </h1>
            <p class="subtitle">八門 · 九星 · 八神 · 奇門格局 · 四害映射</p>
        </div>

        <!-- 搜索區域 -->
        <div class="symbol-search">
            <div class="section-header">
                <i class="fas fa-search"></i>
                <h2>符號搜索</h2>
            </div>
            
            <div class="search-box">
                <input type="text" id="symbolSearch" class="search-input" placeholder="搜索奇門符號或格局...">
                <i class="fas fa-search search-icon"></i>
                
                <div class="search-tags">
                    <span class="search-tag" data-search="吉門">吉門</span>
                    <span class="search-tag" data-search="凶門">凶門</span>
                    <span class="search-tag" data-search="四害">四害</span>
                    <span class="search-tag" data-search="值符">值符</span>
                    <span class="search-tag" data-search="白虎">白虎</span>
                    <span class="search-tag" data-search="天乙飛宮">天乙飛宮</span>
                    <span class="search-tag" data-search="青龍逃走">青龍逃走</span>
                    <span class="search-tag" data-search="小蛇化龍">小蛇化龍</span>
                </div>
            </div>
        </div>

        <!-- 符號分類 -->
        <div class="symbol-categories">
            <div class="section-header">
                <i class="fas fa-th-large"></i>
                <h2>符號分類瀏覽</h2>
            </div>
            
            <div class="category-grid">
                <!-- 八門 -->
                <div class="symbol-category">
                    <div class="category-title">
                        <i class="fas fa-door-open"></i>
                        八門
                    </div>
                    <div class="symbol-list" id="eightDoors">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 九星 -->
                <div class="symbol-category">
                    <div class="category-title">
                        <i class="fas fa-star"></i>
                        九星
                    </div>
                    <div class="symbol-list" id="nineStars">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 八神 -->
                <div class="symbol-category">
                    <div class="category-title">
                        <i class="fas fa-ghost"></i>
                        八神
                    </div>
                    <div class="symbol-list" id="eightDeities">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 奇門格局 -->
                <div class="symbol-category">
                    <div class="category-title">
                        <i class="fas fa-chess-board"></i>
                        奇門格局
                    </div>
                    <div class="symbol-list" id="qimenPatterns">
                        <!-- 動態載入 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 符號詳情 -->
        <div class="pattern-details">
            <div id="detailEmpty" class="detail-empty">
                <i class="fas fa-info-circle"></i>
                <h3>選擇符號查看詳情</h3>
                <p>點擊左側的符號查看詳細信息和足球映射</p>
            </div>
            
            <div id="detailContent" class="detail-content">
                <div class="detail-header">
                    <h2 id="detailName" class="detail-name">休門</h2>
                    <span id="detailType" class="detail-type">吉門</span>
                </div>
                
                <div class="detail-body">
                    <div class="detail-description" id="detailDescription">
                        <!-- 詳細描述 -->
                    </div>
                    
                    <div class="detail-attributes">
                        <h3 class="attributes-title">屬性特徵</h3>
                        <ul class="attributes-list" id="detailAttributes">
                            <!-- 屬性列表 -->
                        </ul>
                    </div>
                </div>
                
                <!-- 足球映射 -->
                <div class="football-mapping">
                    <h3 class="mapping-title">
                        <i class="fas fa-futbol"></i>
                        足球比賽映射
                    </h3>
                    <div class="mapping-grid" id="footballMapping">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 參數影響 -->
                <div class="param-impact">
                    <h3 class="impact-title">
                        <i class="fas fa-chart-line"></i>
                        AI參數影響
                    </h3>
                    <div class="impact-values" id="paramImpact">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 示例格局 -->
                <div class="pattern-examples">
                    <h3 class="examples-title">
                        <i class="fas fa-history"></i>
                        歷史比賽示例
                    </h3>
                    <div class="examples-list" id="patternExamples">
                        <!-- 動態載入 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript文件 -->
    <script src="script.js"></script>
    <script>
        // 奇門數據庫頁面邏輯
        document.addEventListener('DOMContentLoaded', function() {
            console.log('奇門數據庫頁面加載完成');
            
            // 初始化符號數據庫
            initSymbolDatabase();
            
            // 載入符號分類
            loadSymbolCategories();
            
            // 事件監聽
            document.getElementById('symbolSearch').addEventListener('input', searchSymbols);
            
            // 搜索標籤點擊事件
            document.querySelectorAll('.search-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    const searchTerm = this.dataset.search;
                    document.getElementById('symbolSearch').value = searchTerm;
                    searchSymbols();
                });
            });
            
            // 示例載入
            if (window.location.search.includes('example=1')) {
                loadExampleSymbol();
            }
        });
        
        // 符號數據庫
        let symbolDatabase = {};
        
        // 初始化符號數據庫
        function initSymbolDatabase() {
            symbolDatabase = {
                // 八門
                '休門': {
                    type: '八門',
                    category: '吉門',
                    description: '休門屬水，主休息、養生、談判、發展。在比賽中代表緩慢節奏、技術性打法、控球為主的風格。',
                    attributes: ['休息', '談判', '發展', '緩慢', '技術'],
                    footballMapping: {
                        '比賽節奏': '緩慢，控球為主',
                        '戰術風格': '技術性打法，重視傳控',
                        '有利時段': '下半場中段',
                        '不利因素': '快速反擊',
                        '球隊類型': '傳控型球隊'
                    },
                    paramImpact: {
                        '角球影響': '+0.15',
                        '控球影響': '+0.20',
                        '黃牌影響': '-0.10',
                        '進攻影響': '+0.10'
                    },
                    examples: [
                        'FB3079 巽宮休門：客隊控球率36%，但效率較高',
                        'FB3050 值使休門：比賽節奏緩慢，技術性較強'
                    ]
                },
                
                '生門': {
                    type: '八門',
                    category: '吉門',
                    description: '生門屬土，主生長、生意、有利、發展。在比賽中代表進攻機會、得分可能性、發展潛力。',
                    attributes: ['生長', '生意', '有利', '發展', '機會'],
                    footballMapping: {
                        '比賽節奏': '積極進攻，尋求機會',
                        '戰術風格': '攻勢足球，創造機會',
                        '有利時段': '比賽中段',
                        '不利因素': '防守反擊',
                        '球隊類型': '進攻型球隊'
                    },
                    paramImpact: {
                        '角球影響': '+0.25',
                        '控球影響': '+0.15',
                        '黃牌影響': '+0.05',
                        '進攻影響': '+0.30'
                    },
                    examples: [
                        'FB3200 離宮生門：客隊最終掌握比賽主動',
                        'FB3050 生門落宮：主隊進攻積極，創造多次機會'
                    ]
                },
                
                '傷門': {
                    type: '八門',
                    category: '凶門',
                    description: '傷門屬木，主傷害、競爭、損失、受傷。在比賽中代表激烈對抗、黃牌風險、球員受傷可能性。',
                    attributes: ['傷害', '競爭', '損失', '受傷', '對抗'],
                    footballMapping: {
                        '比賽節奏': '激烈對抗，身體接觸多',
                        '戰術風格': '壓迫式防守，硬朗打法',
                        '有利時段': '上半場初期',
                        '不利因素': '技術失誤',
                        '球隊類型': '身體對抗型球隊'
                    },
                    paramImpact: {
                        '角球影響': '-0.10',
                        '控球影響': '-0.15',
                        '黃牌影響': '+0.25',
                        '進攻影響': '-0.10'
                    },
                    examples: [
                        'FB3079 傷門門迫：實際黃牌11張，遠超預期',
                        'FB3021 傷門落宮：比賽對抗激烈，多次犯規'
                    ]
                },
                
                '死門': {
                    type: '八門',
                    category: '凶門',
                    description: '死門屬土，主終結、停滯、困難、結束。在比賽中代表進攻停滯、防守困難、比賽沉悶。',
                    attributes: ['終結', '停滯', '困難', '結束', '阻塞'],
                    footballMapping: {
                        '比賽節奏': '沉悶，進攻停滯',
                        '戰術風格': '防守為主，缺乏創意',
                        '有利時段': '無明顯優勢時段',
                        '不利因素': '控球失誤',
                        '球隊類型': '防守型球隊'
                    },
                    paramImpact: {
                        '角球影響': '-0.20',
                        '控球影響': '-0.25',
                        '黃牌影響': '+0.10',
                        '進攻影響': '-0.30'
                    },
                    examples: [
                        'FB3079 坎宮死門門迫：主隊控球64%但進攻效率低',
                        'FB3200 坎宮死門：防守可能出現重大失誤'
                    ]
                },
                
                // 九星示例
                '天輔星': {
                    type: '九星',
                    category: '吉星',
                    description: '天輔星屬木，主輔助、教育、仁慈、文化。在比賽中代表團隊合作、戰術紀律、技術優勢。',
                    attributes: ['輔助', '教育', '仁慈', '文化', '合作'],
                    footballMapping: {
                        '比賽風格': '團隊合作，戰術紀律',
                        '球隊優勢': '技術優勢，配合默契',
                        '不利因素': '個人主義',
                        '關鍵球員': '組織核心',
                        '比賽時段': '全場均衡'
                    },
                    paramImpact: {
                        '團隊配合': '+0.25',
                        '技術優勢': '+0.20',
                        '失誤率': '-0.15',
                        '控球率': '+0.10'
                    },
                    examples: [
                        'FB3200 值符天輔星：客隊戰術執行力強',
                        'FB3021 天輔星落宮：球隊配合默契'
                    ]
                },
                
                '天芮星': {
                    type: '九星',
                    category: '凶星',
                    description: '天芮星屬土，主問題、疾病、學習、問題。在比賽中代表傷病問題、戰術問題、團隊不和。',
                    attributes: ['問題', '疾病', '學習', '困難', '阻礙'],
                    footballMapping: {
                        '比賽風險': '傷病困擾，團隊問題',
                        '戰術缺陷': '戰術執行不力',
                        '有利因素': '無明顯優勢',
                        '不利時段': '全場皆可能',
                        '球隊狀態': '狀態不佳'
                    },
                    paramImpact: {
                        '傷病風險': '+0.30',
                        '團隊問題': '+0.25',
                        '戰術失誤': '+0.20',
                        '比賽質量': '-0.25'
                    },
                    examples: [
                        'FB3200 問測者天芮星：比賽可能出現意外問題',
                        '歷史案例：天芮星常與傷病相關'
                    ]
                },
                
                // 八神示例
                '值符': {
                    type: '八神',
                    category: '吉神',
                    description: '值符為八神之首，主領導、最高、直接、權威。在比賽中代表優勢方、主導力量、裁判因素。',
                    attributes: ['領導', '最高', '直接', '權威', '主導'],
                    footballMapping: {
                        '比賽主導': '掌握比賽主動權',
                        '裁判因素': '可能獲得有利判罰',
                        '關鍵時段': '比賽關鍵時刻',
                        '球隊狀態': '信心充足，狀態正佳',
                        '戰術執行': '戰術執行力強'
                    },
                    paramImpact: {
                        '時限性上半場': '+0.25',
                        '時限性下半場': '+0.08',
                        '控球優勢': '+0.15',
                        '得分概率': '+0.20'
                    },
                    examples: [
                        'FB3200 值符天輔星：客隊可能獲得裁判有利判罰',
                        'FB3079 值符天沖星：客隊上半場表現強勢'
                    ]
                },
                
                '白虎': {
                    type: '八神',
                    category: '凶神',
                    description: '白虎屬金，主凶傷、威嚴、爭鬥、傷害。在比賽中代表激烈對抗、受傷風險、紅黃牌。',
                    attributes: ['凶傷', '威嚴', '爭鬥', '傷害', '暴力'],
                    footballMapping: {
                        '比賽風格': '激烈對抗，身體接觸',
                        '風險因素': '受傷和紅黃牌風險高',
                        '裁判尺度': '可能嚴格執法',
                        '球隊作風': '強硬，富有侵略性',
                        '不利因素': '紀律問題'
                    },
                    paramImpact: {
                        '黃牌風險': '+0.30',
                        '受傷風險': '+0.25',
                        '對抗強度': '+0.35',
                        '比賽流暢': '-0.20'
                    },
                    examples: [
                        'FB3200 坎宮白虎：防守可能出現粗暴犯規',
                        'FB3079 白虎落宮：比賽對抗激烈'
                    ]
                },
                
                // 奇門格局示例
                '青龍逃走': {
                    type: '奇門格局',
                    category: '凶格',
                    description: '乙+辛組合，主方逃走，客方有利。在比賽中代表主隊失勢，客隊反擊機會，位置轉換。',
                    attributes: ['逃走', '失勢', '反擊', '轉換', '被動'],
                    footballMapping: {
                        '比賽態勢': '主隊被動，客隊反擊',
                        '關鍵時段': '上半場影響較大',
                        '戰術調整': '可能需要變陣',
                        '得分機會': '客隊反擊得分',
                        '心理狀態': '主隊信心受挫'
                    },
                    paramImpact: {
                        '時限性上半場': '×1.0',
                        '時限性下半場': '×0.5',
                        '主隊劣勢': '+0.35',
                        '客隊優勢': '+0.25'
                    },
                    examples: [
                        'FB3079 青龍逃走格局：客隊上半場取得領先',
                        '歷史案例：此格局常出現反擊得分'
                    ]
                },
                
                '天乙飛宮': {
                    type: '奇門格局',
                    category: '凶格',
                    description: '戊+庚組合，換地方，變動，客方有利。在比賽中代表位置變動，戰術調整，客隊優勢。',
                    attributes: ['飛宮', '變動', '換位', '調整', '利客'],
                    footballMapping: {
                        '比賽變化': '戰術調整頻繁',
                        '位置變動': '球員換位積極',
                        '有利方': '客隊獲得優勢',
                        '關鍵時段': '上半場作用明顯',
                        '比賽節奏': '變化多端'
                    },
                    paramImpact: {
                        '時限性上半場': '+0.35',
                        '時限性下半場': '+0.08',
                        '戰術變化': '+0.25',
                        '客隊得分': '+0.20'
                    },
                    examples: [
                        'FB3050 坤宮天乙飛宮：客隊獲得有利位置',
                        'FB3079 天乙飛宮：客隊上半場得分'
                    ]
                },
                
                '小蛇化龍': {
                    type: '奇門格局',
                    category: '吉格',
                    description: '壬+戊組合，由小變大，逐漸發展。在比賽中代表逐漸佔優，下半場逆轉，能量轉換。',
                    attributes: ['化龍', '發展', '成長', '逆轉', '轉折'],
                    footballMapping: {
                        '比賽發展': '逐漸佔優，後發制人',
                        '關鍵時段': '下半場60-75分鐘',
                        '能量轉換': '劣勢轉優勢',
                        '心理素質': '韌性強，不放棄',
                        '戰術效果': '調整見效'
                    },
                    paramImpact: {
                        '能量轉換係數': '0.70',
                        '逆轉概率': '+0.18',
                        '下半場影響': '+0.30',
                        '比賽轉折': '+0.25'
                    },
                    examples: [
                        'FB3079 離宮小蛇化龍：主隊下半場扳平比分',
                        '歷史案例：此格局常出現逆轉'
                    ]
                },
                
                '星奇入墓': {
                    type: '奇門格局',
                    category: '凶格',
                    description: '丁+己組合，才能難展，時機未到。在比賽中代表能力受限，效率低下，機會浪費。',
                    attributes: ['入墓', '受限', '低效', '浪費', '時機'],
                    footballMapping: {
                        '球員狀態': '能力發揮受限',
                        '進攻效率': '機會浪費嚴重',
                        '戰術效果': '戰術執行不力',
                        '心理狀態': '急躁，缺乏耐心',
                        '比賽質量': '效率低下'
                    },
                    paramImpact: {
                        '時效性上半場': '-0.12',
                        '時效性下半場': '-0.04',
                        '控球影響': '-0.12',
                        '進攻效率': '-0.18'
                    },
                    examples: [
                        'FB3079 坎宮星奇入墓：主隊進攻效率低下',
                        '歷史案例：此格局常出現浪射'
                    ]
                }
            };
        }
        
        // 載入符號分類
        function loadSymbolCategories() {
            // 八門
            const eightDoors = ['休門', '生門', '傷門', '杜門', '景門', '死門', '驚門', '開門'];
            loadSymbolsToCategory('eightDoors', eightDoors);
            
            // 九星
            const nineStars = ['天蓬星', '天芮星', '天沖星', '天輔星', '天禽星', '天心星', '天柱星', '天任星', '天英星'];
            loadSymbolsToCategory('nineStars', nineStars);
            
            // 八神
            const eightDeities = ['值符', '騰蛇', '太陰', '六合', '白虎', '玄武', '九地', '九天'];
            loadSymbolsToCategory('eightDeities', eightDeities);
            
            // 奇門格局
            const qimenPatterns = ['青龍逃走', '白虎猖狂', '朱雀投江', '騰蛇夭矯', '小蛇化龍', '天乙飛宮', '星奇入墓', '日奇被刑', '日奇入地'];
            loadSymbolsToCategory('qimenPatterns', qimenPatterns);
        }
        
        // 載入符號到分類
        function loadSymbolsToCategory(containerId, symbols) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            symbols.forEach(symbolName => {
                const symbolData = symbolDatabase[symbolName];
                if (!symbolData) return;
                
                const symbolItem = document.createElement('div');
                symbolItem.className = 'symbol-item';
                symbolItem.dataset.symbol = symbolName;
                
                // 確定類別標籤顏色
                let categoryClass = 'category-neutral';
                if (symbolData.category === '吉門' || symbolData.category === '吉星' || symbolData.category === '吉神' || symbolData.category === '吉格') {
                    categoryClass = 'category-good';
                } else if (symbolData.category === '凶門' || symbolData.category === '凶星' || symbolData.category === '凶神' || symbolData.category === '凶格') {
                    categoryClass = 'category-bad';
                }
                
                symbolItem.innerHTML = `
                    <div class="symbol-name">${symbolName}</div>
                    <div class="symbol-category-badge ${categoryClass}">${symbolData.category}</div>
                `;
                
                symbolItem.addEventListener('click', function() {
                    selectSymbol(symbolName);
                });
                
                container.appendChild(symbolItem);
            });
        }
        
        // 選擇符號
        function selectSymbol(symbolName) {
            // 移除所有選中狀態
            document.querySelectorAll('.symbol-item').forEach(item => {
                item.classList.remove('selected');
            });
            
            // 添加選中狀態
            document.querySelectorAll(`[data-symbol="${symbolName}"]`).forEach(item => {
                item.classList.add('selected');
            });
            
            // 顯示符號詳情
            displaySymbolDetail(symbolName);
        }
        
        // 顯示符號詳情
        function displaySymbolDetail(symbolName) {
            const symbolData = symbolDatabase[symbolName];
            if (!symbolData) return;
            
            // 隱藏空狀態，顯示詳情
            document.getElementById('detailEmpty').style.display = 'none';
            document.getElementById('detailContent').style.display = 'block';
            
            // 更新基本信息
            document.getElementById('detailName').textContent = symbolName;
            document.getElementById('detailType').textContent = symbolData.category;
            document.getElementById('detailDescription').textContent = symbolData.description;
            
            // 更新屬性列表
            const attributesList = document.getElementById('detailAttributes');
            attributesList.innerHTML = '';
            
            symbolData.attributes.forEach(attr => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-chevron-right attribute-icon"></i> ${attr}`;
                attributesList.appendChild(li);
            });
            
            // 更新足球映射
            const mappingGrid = document.getElementById('footballMapping');
            mappingGrid.innerHTML = '';
            
            for (const [key, value] of Object.entries(symbolData.footballMapping)) {
                const mappingItem = document.createElement('div');
                mappingItem.className = 'mapping-item';
                mappingItem.innerHTML = `
                    <div class="mapping-label">${key}</div>
                    <div class="mapping-value">${value}</div>
                `;
                mappingGrid.appendChild(mappingItem);
            }
            
            // 更新參數影響
            const impactGrid = document.getElementById('paramImpact');
            impactGrid.innerHTML = '';
            
            for (const [key, value] of Object.entries(symbolData.paramImpact)) {
                const impactItem = document.createElement('div');
                impactItem.className = 'impact-item';
                
                // 判斷數值正負
                let impactClass = 'impact-value neutral';
                if (value.toString().startsWith('+') || parseFloat(value) > 0) {
                    impactClass = 'impact-value positive';
                } else if (value.toString().startsWith('-') || parseFloat(value) < 0) {
                    impactClass = 'impact-value negative';
                }
                
                impactItem.innerHTML = `
                    <div class="impact-label">${key}</div>
                    <div class="${impactClass}">${value}</div>
                `;
                impactGrid.appendChild(impactItem);
            }
            
            // 更新示例格局
            const examplesList = document.getElementById('patternExamples');
            examplesList.innerHTML = '';
            
            symbolData.examples.forEach(example => {
                const exampleItem = document.createElement('div');
                exampleItem.className = 'example-item';
                
                // 提取比賽ID
                const matchIdMatch = example.match(/FB\d+/);
                const matchId = matchIdMatch ? matchIdMatch[0] : '';
                
                exampleItem.innerHTML = `
                    <div class="example-match">
                        <i class="fas fa-futbol"></i>
                        ${matchId ? `比賽 ${matchId}` : '歷史案例'}
                    </div>
                    <div class="example-description">${example}</div>
                `;
                examplesList.appendChild(exampleItem);
            });
            
            // 滾動到詳情區域
            document.querySelector('.pattern-details').scrollIntoView({ behavior: 'smooth' });
        }
        
        // 搜索符號
        function searchSymbols() {
            const searchTerm = document.getElementById('symbolSearch').value.trim().toLowerCase();
            
            if (!searchTerm) {
                // 清空搜索，恢復所有符號
                document.querySelectorAll('.symbol-item').forEach(item => {
                    item.style.display = 'block';
                });
                return;
            }
            
            // 在所有符號中搜索
            let foundSymbol = null;
            
            document.querySelectorAll('.symbol-item').forEach(item => {
                const symbolName = item.dataset.symbol;
                const symbolData = symbolDatabase[symbolName];
                
                if (symbolData) {
                    const searchText = symbolName + symbolData.category + symbolData.description + symbolData.attributes.join('');
                    const matches = searchText.toLowerCase().includes(searchTerm);
                    
                    item.style.display = matches ? 'block' : 'none';
                    
                    if (matches && !foundSymbol) {
                        foundSymbol = symbolName;
                    }
                } else {
                    item.style.display = 'none';
                }
            });
            
            // 如果找到符號，自動選擇第一個
            if (foundSymbol) {
                selectSymbol(foundSymbol);
            }
        }
        
        // 載入示例符號
        function loadExampleSymbol() {
            selectSymbol('小蛇化龍');
            systemUtils.showAlert('示例載入', '已選擇「小蛇化龍」格局詳情', 'info');
        }
    </script>
</body>
</html>