<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI參數應用 - 己土玄學AI足球分析系統</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* AI參數應用頁面專用樣式 */
        .params-header, .current-params, .param-editor, .execution-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }

        .params-header {
            background: linear-gradient(135deg, var(--primary-color) 0%, #1a2530 100%);
            color: white;
        }

        .params-header h1 {
            margin: 0;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .params-header .subtitle {
            opacity: 0.9;
            margin-top: 10px;
            font-size: 16px;
        }

        .version-badge {
            background: var(--accent-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-left: 15px;
        }

        /* 當前參數體系 */
        .param-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .category-card {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            border-left: 5px solid transparent;
            transition: all 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .category-card.time {
            border-left-color: var(--secondary-color);
        }

        .category-card.effect {
            border-left-color: var(--accent-color);
        }

        .category-card.energy {
            border-left-color: var(--success-color);
        }

        .category-card.tech {
            border-left-color: var(--warning-color);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .category-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .param-count {
            background: rgba(0,0,0,0.1);
            color: var(--text-secondary);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .param-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .param-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }

        .param-name {
            font-weight: 500;
            color: var(--text-secondary);
            font-size: 14px;
        }

        .param-value {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 16px;
        }

        .param-trend {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .trend-up {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
        }

        .trend-down {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        .trend-stable {
            background: rgba(149, 165, 166, 0.1);
            color: var(--gray-color);
        }

        /* 參數編輯器 */
        .param-editor {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .editor-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .editor-header h2 {
            margin: 0;
            color: var(--primary-color);
        }

        .param-selector {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-sm);
        }

        .param-selector select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 15px;
            background: white;
            cursor: pointer;
        }

        .param-edit-form {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-sm);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 15px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 15px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .current-value {
            background: rgba(52, 152, 219, 0.1);
            color: var(--secondary-color);
            padding: 10px 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }

        .btn-edit {
            background: linear-gradient(135deg, var(--secondary-color) 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: var(--border-radius);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn-edit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(52, 152, 219, 0.3);
        }

        /* 執行區域 */
        .execution-section {
            background: white;
        }

        .code-executor {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .code-header h4 {
            margin: 0;
            color: #ecf0f1;
        }

        .code-content {
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
        }

        .execution-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .execution-controls .btn {
            flex: 1;
            min-width: 150px;
        }

        /* 參數歷史 */
        .param-history {
            margin-top: 30px;
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow-sm);
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .history-table th {
            background: var(--primary-color);
            color: white;
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .history-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }

        .history-table tr:hover {
            background: #f8f9fa;
        }

        /* 響應式調整 */
        @media (max-width: 768px) {
            .params-header, .current-params, .param-editor, .execution-section {
                padding: 20px;
            }
            
            .param-categories {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .execution-controls {
                flex-direction: column;
            }
            
            .history-table {
                font-size: 13px;
            }
            
            .history-table th,
            .history-table td {
                padding: 8px 10px;
            }
        }

        @media (max-width: 480px) {
            .params-header h1 {
                font-size: 22px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .version-badge {
                margin-left: 0;
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 返回導航 -->
        <div class="back-nav">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                返回主儀表板
            </a>
            <span class="nav-title">AI參數應用系統</span>
        </div>

        <!-- 參數體系標題 -->
        <div class="params-header">
            <h1>
                <i class="fas fa-robot"></i>
                AI三維參數體系
                <span class="version-badge">V5.1I 賽後驗證優化版</span>
            </h1>
            <p class="subtitle">時限性 · 時效性 · 能量轉換 · 技術算法</p>
        </div>

        <!-- 當前參數體系 -->
        <div class="current-params">
            <div class="section-header">
                <i class="fas fa-cogs"></i>
                <h2>當前參數配置</h2>
            </div>
            
            <div class="param-categories">
                <!-- 時限性參數 -->
                <div class="category-card time">
                    <div class="category-header">
                        <div class="category-title">
                            <i class="fas fa-clock"></i>
                            時限性參數
                        </div>
                        <div class="param-count">6個參數</div>
                    </div>
                    <div class="param-list" id="timeParams">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 時效性參數 -->
                <div class="category-card effect">
                    <div class="category-header">
                        <div class="category-title">
                            <i class="fas fa-hourglass-half"></i>
                            時效性參數
                        </div>
                        <div class="param-count">10個參數</div>
                    </div>
                    <div class="param-list" id="effectParams">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 能量轉換參數 -->
                <div class="category-card energy">
                    <div class="category-header">
                        <div class="category-title">
                            <i class="fas fa-bolt"></i>
                            能量轉換參數
                        </div>
                        <div class="param-count">3個參數</div>
                    </div>
                    <div class="param-list" id="energyParams">
                        <!-- 動態載入 -->
                    </div>
                </div>
                
                <!-- 技術算法參數 -->
                <div class="category-card tech">
                    <div class="category-header">
                        <div class="category-title">
                            <i class="fas fa-calculator"></i>
                            技術算法參數
                        </div>
                        <div class="param-count">9個參數</div>
                    </div>
                    <div class="param-list" id="techParams">
                        <!-- 動態載入 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 參數編輯器 -->
        <div class="param-editor">
            <div class="editor-header">
                <i class="fas fa-edit"></i>
                <h2>參數編輯器</h2>
            </div>
            
            <div class="param-selector">
                <label for="paramSelect">選擇要編輯的參數：</label>
                <select id="paramSelect">
                    <option value="">請選擇參數...</option>
                    <!-- 動態載入 -->
                </select>
            </div>
            
            <div class="param-edit-form" id="paramForm" style="display: none;">
                <div class="current-value" id="currentValueDisplay">
                    <!-- 動態顯示當前值 -->
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="newValue">新參數值</label>
                        <input type="text" id="newValue" class="form-control" placeholder="輸入新值">
                    </div>
                    
                    <div class="form-group">
                        <label for="validationCount">驗證場次</label>
                        <input type="number" id="validationCount" class="form-control" value="12">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editReason">修改原因</label>
                    <textarea id="editReason" class="form-control" rows="3" placeholder="請描述修改原因和依據..."></textarea>
                </div>
                
                <button id="updateParam" class="btn-edit">
                    <i class="fas fa-save"></i>
                    更新參數
                </button>
            </div>
        </div>

        <!-- 代碼執行區域 -->
        <div class="execution-section">
            <div class="section-header">
                <i class="fas fa-code"></i>
                <h2>指令包執行器</h2>
            </div>
            
            <div class="code-executor">
                <div class="code-header">
                    <h4><i class="fas fa-terminal"></i> 懶人指令包執行器</h4>
                    <span id="codeStatus" style="color: #27ae60;">就緒</span>
                </div>
                <div class="code-content" id="codeContent">
// 從賽後分析頁面複製的指令包代碼將顯示在這裡
// 或直接粘貼您的優化代碼

// 示例：
// valueStarFirstHalf = 0.28; // 從 0.25 調整
// feiGongFirstHalf = 0.38; // 從 0.35 調整
                </div>
            </div>
            
            <div class="execution-controls">
                <button id="pasteCode" class="btn btn-primary">
                    <i class="fas fa-paste"></i> 粘貼代碼
                </button>
                <button id="validateCode" class="btn btn-secondary">
                    <i class="fas fa-check"></i> 驗證語法
                </button>
                <button id="executeCode" class="btn btn-success">
                    <i class="fas fa-play"></i> 執行更新
                </button>
                <button id="testUpdates" class="btn btn-warning">
                    <i class="fas fa-vial"></i> 測試效果
                </button>
            </div>
            
            <!-- 執行結果 -->
            <div class="execution-result" id="executionResult" style="display: none; margin-top: 25px;">
                <div class="result-header">
                    <h4><i class="fas fa-history"></i> 執行結果</h4>
                </div>
                <div class="result-content" id="resultContent">
                    <!-- 動態顯示結果 -->
                </div>
            </div>
        </div>

        <!-- 參數修改歷史 -->
        <div class="param-history">
            <div class="section-header">
                <i class="fas fa-history"></i>
                <h2>參數修改歷史</h2>
            </div>
            
            <table class="history-table">
                <thead>
                    <tr>
                        <th>時間</th>
                        <th>參數名稱</th>
                        <th>舊值 → 新值</th>
                        <th>修改原因</th>
                    </tr>
                </thead>
                <tbody id="historyTable">
                    <!-- 動態載入 -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- JavaScript文件 -->
    <script src="script.js"></script>
    <script>
        // AI參數應用頁面邏輯
        document.addEventListener('DOMContentLoaded', function() {
            console.log('AI參數應用頁面加載完成');
            
            // 初始化
            loadCurrentParameters();
            loadParameterHistory();
            
            // 事件監聽
            document.getElementById('paramSelect').addEventListener('change', onParamSelect);
            document.getElementById('updateParam').addEventListener('click', updateParameter);
            document.getElementById('pasteCode').addEventListener('click', pasteLazyCode);
            document.getElementById('validateCode').addEventListener('click', validateCode);
            document.getElementById('executeCode').addEventListener('click', executeCode);
            document.getElementById('testUpdates').addEventListener('click', testUpdates);
            
            // 示例數據（測試用）
            if (window.location.search.includes('example=1')) {
                loadExampleData();
            }
        });
        
        // 載入當前參數
        async function loadCurrentParameters() {
            try {
                // 模擬載入參數數據
                const parameters = {
                    timeParams: [
                        { name: '值符天沖星上半場', value: '0.25', trend: 'stable' },
                        { name: '值符天沖星下半場', value: '0.08', trend: 'stable' },
                        { name: '天乙飛宮上半場', value: '0.35', trend: 'stable' },
                        { name: '天乙飛宮下半場', value: '0.08', trend: 'stable' },
                        { name: '青龍逃走上半場', value: '1.0', trend: 'stable' },
                        { name: '青龍逃走下半場', value: '0.5', trend: 'stable' }
                    ],
                    effectParams: [
                        { name: '四害總時效性上半場', value: '-0.25', trend: 'stable' },
                        { name: '四害總時效性下半場', value: '-0.08', trend: 'stable' },
                        { name: '死門門迫上半場', value: '-0.15', trend: 'up' },
                        { name: '死門門迫下半場', value: '-0.06', trend: 'up' },
                        { name: '星奇入墓上半場', value: '-0.12', trend: 'down' },
                        { name: '星奇入墓下半場', value: '-0.04', trend: 'down' },
                        { name: '凶蛇入獄上半場', value: '-0.08', trend: 'down' },
                        { name: '凶蛇入獄下半場', value: '-0.03', trend: 'down' },
                        { name: '九天吉神上半場', value: '0.05', trend: 'up' },
                        { name: '九天吉神下半場', value: '0.40', trend: 'up' }
                    ],
                    energyParams: [
                        { name: '小蛇化龍轉換係數', value: '0.70', trend: 'up' },
                        { name: '逆轉概率', value: '0.18', trend: 'up' },
                        { name: '極端轉換概率', value: '0.18', trend: 'stable' }
                    ],
                    techParams: [
                        { name: '基礎黃牌數', value: '3', trend: 'stable' },
                        { name: '傷門黃牌影響', value: '2', trend: 'up' },
                        { name: '驚門黃牌影響', value: '1', trend: 'up' },
                        { name: '九天吉神對抗增加', value: '2', trend: 'up' },
                        { name: '死門門迫控球影響', value: '-0.25', trend: 'up' },
                        { name: '星奇入墓控球影響', value: '-0.12', trend: 'up' },
                        { name: '九天吉神危險進攻', value: '0.50', trend: 'up' },
                        { name: '天沖星進攻次數', value: '0.30', trend: 'up' },
                        { name: '休門限制角球係數', value: '0.15', trend: 'up' }
                    ]
                };
                
                // 填充參數顯示
                for (const category in parameters) {
                    const container = document.getElementById(category);
                    container.innerHTML = '';
                    
                    parameters[category].forEach(param => {
                        const paramItem = document.createElement('div');
                        paramItem.className = 'param-item';
                        paramItem.innerHTML = `
                            <div class="param-name">${param.name}</div>
                            <div class="param-value">${param.value}</div>
                            <div class="param-trend trend-${param.trend}">
                                ${getTrendIcon(param.trend)}
                            </div>
                        `;
                        container.appendChild(paramItem);
                    });
                }
                
                // 填充參數選擇下拉框
                const paramSelect = document.getElementById('paramSelect');
                paramSelect.innerHTML = '<option value="">請選擇參數...</option>';
                
                // 添加所有參數到下拉框
                Object.keys(parameters).forEach(category => {
                    parameters[category].forEach(param => {
                        const option = document.createElement('option');
                        option.value = `${category}_${param.name}`;
                        option.textContent = param.name;
                        option.dataset.value = param.value;
                        paramSelect.appendChild(option);
                    });
                });
                
            } catch (error) {
                console.error('載入參數時出錯:', error);
                systemUtils.showAlert('載入失敗', '無法載入參數數據', 'error');
            }
        }
        
        // 獲取趨勢圖標
        function getTrendIcon(trend) {
            switch(trend) {
                case 'up': return '↗';
                case 'down': return '↘';
                default: return '→';
            }
        }
        
        // 參數選擇事件
        function onParamSelect(event) {
            const selectedValue = event.target.value;
            const paramForm = document.getElementById('paramForm');
            
            if (!selectedValue) {
                paramForm.style.display = 'none';
                return;
            }
            
            // 顯示表單
            paramForm.style.display = 'block';
            
            // 獲取選中參數信息
            const selectedOption = event.target.selectedOptions[0];
            const paramName = selectedOption.textContent;
            const currentValue = selectedOption.dataset.value;
            
            // 顯示當前值
            document.getElementById('currentValueDisplay').innerHTML = `
                <strong>${paramName}</strong>
                <br>
                當前值: <span style="font-weight: 700;">${currentValue}</span>
            `;
            
            // 預設新值為當前值
            document.getElementById('newValue').value = currentValue;
            
            // 清空原因
            document.getElementById('editReason').value = '';
        }
        
        // 更新參數
        function updateParameter() {
            const paramSelect = document.getElementById('paramSelect');
            const newValue = document.getElementById('newValue').value.trim();
            const reason = document.getElementById('editReason').value.trim();
            
            if (!paramSelect.value) {
                systemUtils.showAlert('錯誤', '請選擇要編輯的參數', 'error');
                return;
            }
            
            if (!newValue) {
                systemUtils.showAlert('錯誤', '請輸入新參數值', 'error');
                return;
            }
            
            if (!reason) {
                systemUtils.showAlert('錯誤', '請描述修改原因', 'error');
                return;
            }
            
            const paramName = paramSelect.selectedOptions[0].textContent;
            const currentValue = paramSelect.selectedOptions[0].dataset.value;
            
            const confirmUpdate = confirm(`確定要更新參數嗎？
            
參數: ${paramName}
從: ${currentValue}
到: ${newValue}

原因: ${reason}`);
            
            if (confirmUpdate) {
                // 這裡應該實現實際的參數更新邏輯
                systemUtils.showAlert('更新成功', '參數已更新', 'success');
                
                // 重新載入參數
                loadCurrentParameters();
                loadParameterHistory();
                
                // 重置表單
                paramForm.style.display = 'none';
                paramSelect.value = '';
            }
        }
        
        // 粘貼代碼
        function pasteLazyCode() {
            const codeContent = document.getElementById('codeContent');
            
            navigator.clipboard.readText()
                .then(text => {
                    if (text.trim()) {
                        codeContent.textContent = text;
                        systemUtils.showAlert('粘貼成功', '代碼已從剪貼板粘貼', 'success');
                    } else {
                        systemUtils.showAlert('剪貼板為空', '請先複製代碼到剪貼板', 'warning');
                    }
                })
                .catch(err => {
                    console.error('讀取剪貼板失敗:', err);
                    
                    // 模擬粘貼示例代碼
                    const exampleCode = `// 懶人指令包 - AI參數優化代碼
// 生成時間: ${new Date().toLocaleString('zh-Hant')}
// 比賽ID: FB3200
// 整體準確度: 67.5%

// 請複製以下代碼到 ai_parameters.csv 或相應JS文件中執行

// 調整值符星參數
valueStarFirstHalf = 0.28; // 從 0.25 調整
feiGongFirstHalf = 0.38; // 從 0.35 調整

// 調整角球算法係數
restDoorCornerCoefficient = 0.18; // 從 0.15 調整

// 當前參數表現良好，無需調整
// 建議繼續觀察後續比賽`;
                    
                    codeContent.textContent = exampleCode;
                    systemUtils.showAlert('示例代碼', '已載入示例優化代碼', 'info');
                });
        }
        
        // 驗證代碼語法
        function validateCode() {
            const codeContent = document.getElementById('codeContent').textContent;
            const codeStatus = document.getElementById('codeStatus');
            
            if (!codeContent.trim() || codeContent.includes('請複製以下代碼')) {
                codeStatus.textContent = '無效代碼';
                codeStatus.style.color = '#e74c3c';
                systemUtils.showAlert('驗證失敗', '請先粘貼有效的優化代碼', 'warning');
                return;
            }
            
            // 簡單語法檢查
            const hasAssignments = codeContent.includes('=');
            const hasComments = codeContent.includes('//');
            
            if (!hasAssignments) {
                codeStatus.textContent = '語法錯誤';
                codeStatus.style.color = '#e74c3c';
                systemUtils.showAlert('語法錯誤', '代碼中沒有找到有效的賦值語句', 'error');
                return;
            }
            
            codeStatus.textContent = '語法有效';
            codeStatus.style.color = '#27ae60';
            systemUtils.showAlert('驗證通過', '代碼語法檢查通過', 'success');
        }
        
        // 執行代碼
        function executeCode() {
            const codeContent = document.getElementById('codeContent').textContent;
            const codeStatus = document.getElementById('codeStatus');
            
            if (codeStatus.textContent !== '語法有效') {
                systemUtils.showAlert('無法執行', '請先驗證代碼語法', 'warning');
                return;
            }
            
            const confirmExecute = confirm('確定要執行這些參數更新嗎？\n這將會修改當前的AI參數體系。');
            if (!confirmExecute) return;
            
            codeStatus.textContent = '執行中...';
            codeStatus.style.color = '#f39c12';
            
            // 模擬執行過程
            setTimeout(() => {
                codeStatus.textContent = '執行成功';
                codeStatus.style.color = '#27ae60';
                
                // 顯示執行結果
                const resultContent = `
                    <div class="result-item success">
                        <i class="fas fa-check-circle"></i>
                        <strong>參數更新成功</strong>
                        <p>已更新 3 個參數</p>
                    </div>
                    <div class="result-item">
                        <i class="fas fa-info-circle"></i>
                        <strong>更新詳情</strong>
                        <ul>
                            <li>valueStarFirstHalf: 0.25 → 0.28</li>
                            <li>feiGongFirstHalf: 0.35 → 0.38</li>
                            <li>restDoorCornerCoefficient: 0.15 → 0.18</li>
                        </ul>
                    </div>
                    <div class="result-item">
                        <i class="fas fa-sync-alt"></i>
                        <strong>建議操作</strong>
                        <p>請前往歷史驗證頁面測試新參數效果</p>
                    </div>
                `;
                
                document.getElementById('resultContent').innerHTML = resultContent;
                document.getElementById('executionResult').style.display = 'block';
                
                systemUtils.showAlert('執行成功', '參數更新已應用到系統', 'success');
                
                // 重新載入參數
                loadCurrentParameters();
                
            }, 1500);
        }
        
        // 測試更新效果
        function testUpdates() {
            systemUtils.showAlert('測試功能', '測試功能將在下一版本實現', 'info');
            
            // 顯示測試界面
            const resultContent = `
                <div class="result-item">
                    <i class="fas fa-vial"></i>
                    <strong>測試參數更新效果</strong>
                    <p>此功能將使用歷史數據測試新參數的準確度</p>
                </div>
                <div class="result-item">
                    <i class="fas fa-hourglass-half"></i>
                    <strong>預計測試時間</strong>
                    <p>12場歷史比賽 × 30秒/場 ≈ 6分鐘</p>
                </div>
                <div class="result-item">
                    <i class="fas fa-cogs"></i>
                    <strong>測試範圍</strong>
                    <p>將測試新參數在歷史比賽中的準確度變化</p>
                </div>
                <button id="startTest" class="btn btn-primary" style="margin-top: 15px;">
                    <i class="fas fa-play"></i> 開始測試
                </button>
            `;
            
            document.getElementById('resultContent').innerHTML = resultContent;
            document.getElementById('executionResult').style.display = 'block';
            
            // 添加測試按鈕事件
            setTimeout(() => {
                document.getElementById('startTest')?.addEventListener('click', function() {
                    this.disabled = true;
                    this.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 測試中...';
                    
                    setTimeout(() => {
                        const testResult = `
                            <div class="result-item success">
                                <i class="fas fa-chart-line"></i>
                                <strong>測試完成</strong>
                                <p>參數測試完成，準確度提升 2.3%</p>
                            </div>
                            <div class="result-item">
                                <i class="fas fa-percentage"></i>
                                <strong>測試結果</strong>
                                <ul>
                                    <li>原準確度: 65.2%</li>
                                    <li>新準確度: 67.5%</li>
                                    <li>提升幅度: +2.3%</li>
                                </ul>
                            </div>
                            <div class="result-item">
                                <i class="fas fa-check-circle"></i>
                                <strong>結論</strong>
                                <p>新參數表現良好，建議正式部署</p>
                            </div>
                        `;
                        
                        document.getElementById('resultContent').innerHTML = testResult;
                        systemUtils.showAlert('測試完成', '新參數準確度提升2.3%', 'success');
                    }, 3000);
                });
            }, 100);
        }
        
        // 載入參數修改歷史
        function loadParameterHistory() {
            const historyData = [
                {
                    time: '2026-02-03 15:30',
                    param: '九天吉神下半場',
                    change: '0.25 → 0.40',
                    reason: '基於FB3079驗證，九天進攻增強被嚴重低估'
                },
                {
                    time: '2026-02-03 15:25',
                    param: '死門門迫控球影響',
                    change: '-0.10 → -0.25',
                    reason: 'FB3079實際控球64%，原算法嚴重低估'
                },
                {
                    time: '2026-02-03 15:20',
                    param: '傷門黃牌影響',
                    change: '1 → 2',
                    reason: 'FB3079實際黃牌11張，原算法預測不足'
                },
                {
                    time: '2026-01-30 10:15',
                    param: '小蛇化龍轉換係數',
                    change: '0.65 → 0.70',
                    reason: 'FB3050驗證顯示轉折作用增強'
                },
                {
                    time: '2026-01-28 14:40',
                    param: '逆轉概率',
                    change: '0.15 → 0.18',
                    reason: '歷史數據顯示逆轉概率被低估'
                }
            ];
            
            const historyTable = document.getElementById('historyTable');
            historyTable.innerHTML = '';
            
            historyData.forEach(record => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${record.time}</td>
                    <td>${record.param}</td>
                    <td><strong>${record.change}</strong></td>
                    <td>${record.reason}</td>
                `;
                historyTable.appendChild(row);
            });
        }
        
        // 載入示例數據
        function loadExampleData() {
            const exampleCode = `// 懶人指令包 - AI參數優化代碼
// 生成時間: 2026-02-06 14:30:25
// 比賽ID: FB3200
// 整體準確度: 67.5%

// 請複製以下代碼到 ai_parameters.csv 或相應JS文件中執行

// 調整值符星參數
valueStarFirstHalf = 0.28; // 從 0.25 調整
feiGongFirstHalf = 0.38; // 從 0.35 調整

// 調整角球算法係數
restDoorCornerCoefficient = 0.18; // 從 0.15 調整

// 當前參數表現良好，無需調整
// 建議繼續觀察後續比賽`;
            
            document.getElementById('codeContent').textContent = exampleCode;
            systemUtils.showAlert('示例載入', '已載入示例指令包代碼', 'info');
        }
    </script>
</body>
</html>