<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>預測分析 - 己土系統</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .prediction-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .prediction-result {
            font-size: 2.5em;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .confidence-meter {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 10px 30px;
            border-radius: 50px;
            font-size: 1.2em;
        }
        
        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .detail-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }
        
        .palace-analysis {
            background: #f8f9fa;
            border-left: 4px solid var(--secondary-color);
            padding: 15px;
            margin: 15px 0;
        }
        
        .pattern-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 4px;
            border-left: 3px solid var(--primary-color);
        }
        
        .pattern-item.good {
            border-left-color: var(--success-color);
        }
        
        .pattern-item.bad {
            border-left-color: var(--danger-color);
        }
        
        .qimen-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .diagram-cell {
            aspect-ratio: 1;
            border: 2px solid #ddd;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 10px;
            text-align: center;
        }
        
        .diagram-cell.active {
            border-color: var(--secondary-color);
            background: #e3f2fd;
        }
        
        .palace-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="main-header">
            <div class="logo-section">
                <h1><i class="fas fa-chart-line"></i> 奇門足球預測分析</h1>
                <p class="version">FB3200 預測報告</p>
            </div>
            <nav class="main-nav">
                <a href="index.html"><i class="fas fa-home"></i> 輸入介面</a>
                <a href="prediction.html" class="active"><i class="fas fa-chart-line"></i> 當前預測</a>
                <a href="history.html"><i class="fas fa-history"></i> 歷史驗證</a>
                <a href="ai-params.html"><i class="fas fa-brain"></i> AI參數</a>
            </nav>
        </header>

        <main>
            <!-- 預測結果展示 -->
            <section class="prediction-hero">
                <h2>賽事預測報告</h2>
                <div class="match-info">
                    <h3>馬德里CFF女足 vs 特內里費女足</h3>
                    <p>女子西班牙盃 | 2026年2月5日 02:00</p>
                </div>
                <div class="prediction-result" id="prediction-result">主勝</div>
                <div class="confidence-meter" id="confidence-meter">置信度：78%</div>
            </section>

            <div class="detail-grid">
                <!-- 左側：預測詳情 -->
                <div class="detail-card">
                    <h3><i class="fas fa-bullseye"></i> 詳細預測</h3>
                    
                    <div class="prediction-details">
                        <div class="detail-item">
                            <span class="label">比賽結果：</span>
                            <span class="value" id="detail-result">主隊獲勝</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">角球預測：</span>
                            <span class="value" id="detail-corners">主隊 5 - 3 客隊</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">讓球建議：</span>
                            <span class="value" id="detail-handicap">主隊讓0.5球</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">大小球：</span>
                            <span class="value" id="detail-overunder">2.5球以下</span>
                        </div>
                    </div>

                    <div class="probability-chart">
                        <h4>概率分布</h4>
                        <div class="prob-bar">
                            <div class="prob-label">主勝</div>
                            <div class="prob-meter">
                                <div class="prob-fill" style="width: 65%; background: #27ae60;"></div>
                                <span class="prob-value">65%</span>
                            </div>
                        </div>
                        <div class="prob-bar">
                            <div class="prob-label">和局</div>
                            <div class="prob-meter">
                                <div class="prob-fill" style="width: 20%; background: #f39c12;"></div>
                                <span class="prob-value">20%</span>
                            </div>
                        </div>
                        <div class="prob-bar">
                            <div class="prob-label">客勝</div>
                            <div class="prob-meter">
                                <div class="prob-fill" style="width: 15%; background: #e74c3c;"></div>
                                <span class="prob-value">15%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右側：奇門分析 -->
                <div class="detail-card">
                    <h3><i class="fas fa-yin-yang"></i> 奇門格局分析</h3>
                    
                    <div class="qimen-diagram">
                        <!-- 奇門九宮圖 -->
                        <div class="diagram-cell">
                            <div class="palace-name">離宮</div>
                            <div class="palace-content">己+丁</div>
                            <div class="palace-detail">生門 天輔</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">坤宮</div>
                            <div class="palace-content">-</div>
                        </div>
                        <div class="diagram-cell active">
                            <div class="palace-name">兌宮</div>
                            <div class="palace-content">乙+壬</div>
                            <div class="palace-detail">杜門 天芮</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">巽宮</div>
                            <div class="palace-content">戊+己</div>
                            <div class="palace-detail">休門 天沖</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">中宮</div>
                            <div class="palace-content">-</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">乾宮</div>
                            <div class="palace-content">壬+辛</div>
                            <div class="palace-detail">景門 天柱</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">震宮</div>
                            <div class="palace-content">癸+戊</div>
                            <div class="palace-detail">開門 天任</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">艮宮</div>
                            <div class="palace-content">丙+癸</div>
                            <div class="palace-detail">驚門 天蓬</div>
                        </div>
                        <div class="diagram-cell">
                            <div class="palace-name">坎宮</div>
                            <div class="palace-content">辛+丙</div>
                            <div class="palace-detail">死門 天心</div>
                        </div>
                    </div>

                    <div class="palace-analysis">
                        <h4>關鍵格局解讀</h4>
                        <div class="pattern-item good">
                            <strong>主隊優勢：</strong> 離宮生門天輔值符，得地利貴人扶持
                        </div>
                        <div class="pattern-item bad">
                            <strong>客隊劣勢：</strong> 兌宮空亡杜門天芮，狀態不佳進攻受阻
                        </div>
                        <div class="pattern-item good">
                            <strong>五行生克：</strong> 離火克兌金，主隊克制客隊
                        </div>
                        <div class="pattern-item bad">
                            <strong>四害影響：</strong> 客隊宮位空亡，主隊無四害
                        </div>
                    </div>
                </div>
            </div>

            <!-- 詳細分析 -->
            <section class="card">
                <h3><i class="fas fa-microscope"></i> 詳細分析報告</h3>
                
                <div class="analysis-section">
                    <h4>一、主隊（馬德里CFF女足）分析</h4>
                    <p><strong>離宮值符天輔星：</strong> 主隊得天時，天輔星為文曲星，代表戰術組織能力強，配合生門吉門，進攻有條理。</p>
                    <p><strong>己+丁朱雀入墓：</strong> 雖有朱雀入墓之象，但丁火透出，表示雖有小失誤但能及時調整。</p>
                    <p><strong>宮位能量：</strong> 離宮無四害，能量充沛，火旺相，氣勢正盛。</p>
                </div>
                
                <div class="analysis-section">
                    <h4>二、客隊（特內里費女足）分析</h4>
                    <p><strong>兌宮值使杜門天芮星：</strong> 客隊臨杜門，進攻受阻，天芮病星顯示狀態不佳或有傷病情況。</p>
                    <p><strong>乙+壬日奇入地：</strong> 計劃難以實施，奇兵戰術效果不佳，乙木被壬水所淹。</p>
                    <p><strong>空亡影響：</strong> 申酉空亡在兌宮，客隊宮位落空，實力無法完全發揮。</p>
                </div>
                
                <div class="analysis-section">
                    <h4>三、角球特別分析</h4>
                    <p><strong>景門在乾宮門迫：</strong> 景門主血光爭執，門迫表示角球爭奪激烈但效率不高。</p>
                    <p><strong>驚門在艮宮：</strong> 驚門主驚恐，客隊角球防守可能出現失誤。</p>
                    <p><strong>預測依據：</strong> 主隊生門創造機會多，客隊杜門進攻少，故角球數5-3。</p>
                </div>
                
                <div class="analysis-section">
                    <h4>四、AI學習參數應用</h4>
                    <p>本次預測應用了以下AI參數權重：</p>
                    <ul>
                        <li>宮位強度權重：35%</li>
                        <li>用神關係權重：25%</li>
                        <li>時空因素權重：15%</li>
                        <li>格局分析權重：15%</li>
                        <li>球隊狀態權重：10%</li>
                    </ul>
                    <p><em>基於歷史數據，離火克兌金格局準確率達72%</em></p>
                </div>
            </section>

            <!-- 行動按鈕 -->
            <div class="action-section">
                <button class="btn-primary" onclick="savePrediction()">
                    <i class="fas fa-save"></i> 保存預測報告
                </button>
                <button class="btn-secondary" onclick="recordResult()">
                    <i class="fas fa-clipboard-check"></i> 輸入比賽結果
                </button>
                <button class="btn-secondary" onclick="viewHistory()">
                    <i class="fas fa-history"></i> 查看歷史驗證
                </button>
            </div>
        </main>

        <footer class="main-footer">
            <p>己土玄學顧問公司 © 2026 | 預測報告僅供參考</p>
            <p class="disclaimer">系統版本：1.0 | 預測時間：<span id="prediction-time"></span></p>
        </footer>
    </div>

    <script src="js/main.js"></script>
    <script>
        // 加載預測數據
        document.addEventListener('DOMContentLoaded', function() {
            const prediction = JSON.parse(localStorage.getItem('currentPrediction'));
            
            if (prediction) {
                // 更新頁面內容
                document.getElementById('prediction-result').textContent = prediction.predictions.result;
                document.getElementById('confidence-meter').textContent = `置信度：${prediction.predictions.confidence}%`;
                document.getElementById('detail-result').textContent = prediction.predictions.result;
                document.getElementById('detail-corners').textContent = 
                    `主隊 ${prediction.predictions.corners.home} - ${prediction.predictions.corners.away} 客隊`;
                document.getElementById('prediction-time').textContent = 
                    new Date(prediction.timestamp).toLocaleString();
                
                // 根據預測設置顏色
                const result = prediction.predictions.result;
                const resultElement = document.getElementById('prediction-result');
                
                if (result.includes('主勝')) {
                    resultElement.style.color = '#27ae60';
                } else if (result.includes('客勝')) {
                    resultElement.style.color = '#e74c3c';
                } else {
                    resultElement.style.color = '#f39c12';
                }
            } else {
                // 如果沒有數據，使用示例數據
                document.getElementById('prediction-time').textContent = new Date().toLocaleString();
            }
        });
        
        // 頁面功能
        function savePrediction() {
            const prediction = JSON.parse(localStorage.getItem('currentPrediction') || '{}');
            const dataStr = JSON.stringify(prediction, null, 2);
            const blob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `奇門預測_${prediction.matchId || 'FB3200'}_報告.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('預測報告已保存！');
        }
        
        function recordResult() {
            // 跳轉到結果輸入頁面
            window.location.href = 'index.html?action=record';
        }
        
        function viewHistory() {
            window.location.href = 'history.html';
        }
    </script>
</body>
</html>