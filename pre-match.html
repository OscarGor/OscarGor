<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>賽前預測 - 己土玄學AI足球分析系統</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 賽前預測頁面專用樣式 */
        .match-input-section, .qimen-data-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .section-header i {
            font-size: 24px;
            color: var(--secondary-color);
        }

        .section-header h2 {
            font-size: 22px;
            color: var(--primary-color);
            margin: 0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 15px;
        }

        .form-group .required::after {
            content: ' *';
            color: var(--danger-color);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 15px;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            background: white;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .form-control.textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .form-control.textarea.qimen-input {
            min-height: 300px;
            background: #f5f5f5;
            border: 2px dashed var(--border-color);
        }

        .form-control.textarea.qimen-input:focus {
            background: #fff;
            border-style: solid;
        }

        .form-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .btn-submit {
            background: linear-gradient(135deg, var(--secondary-color) 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            margin-top: 20px;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(52, 152, 219, 0.3);
        }

        .btn-submit:active {
            transform: translateY(0);
        }

        .btn-submit i {
            font-size: 18px;
        }

        /* 分析結果區域 */
        .analysis-results {
            display: none; /* 初始隱藏，點擊後顯示 */
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: var(--shadow-lg);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .results-header h2 {
            color: var(--success-color);
            font-size: 24px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .match-id-badge {
            background: var(--accent-color);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* 核心預測卡片 */
        .prediction-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .prediction-card {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
            border-top: 4px solid transparent;
        }

        .prediction-card.winner {
            border-top-color: var(--success-color);
            background: linear-gradient(to bottom, rgba(39, 174, 96, 0.05), #f8f9fa);
        }

        .prediction-card.corners {
            border-top-color: var(--warning-color);
            background: linear-gradient(to bottom, rgba(243, 156, 18, 0.05), #f8f9fa);
        }

        .prediction-card.cards {
            border-top-color: var(--danger-color);
            background: linear-gradient(to bottom, rgba(231, 76, 60, 0.05), #f8f9fa);
        }

        .prediction-card.possession {
            border-top-color: var(--info-color);
            background: linear-gradient(to bottom, rgba(26, 188, 156, 0.05), #f8f9fa);
        }

        .card-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .card-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .card-probability {
            font-size: 14px;
            color: var(--success-color);
            font-weight: 600;
        }

        /* 上下半場分析 */
        .half-analysis {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
        }

        .half-analysis h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }

        .half-points {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .half-points li {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid var(--secondary-color);
            box-shadow: var(--shadow-sm);
        }

        .half-points li:nth-child(2n) {
            border-left-color: var(--accent-color);
        }

        /* 奇門格局亮點 */
        .qimen-highlights {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: var(--border-radius);
            padding: 25px;
            border: 2px solid var(--border-color);
        }

        .highlight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .highlight-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow-sm);
        }

        .highlight-title {
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .highlight-title .icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .highlight-title .icon.good {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
        }

        .highlight-title .icon.bad {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        .highlight-title .icon.neutral {
            background: rgba(52, 152, 219, 0.1);
            color: var(--secondary-color);
        }

        .highlight-content {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
        }

        /* 按鈕組 */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-buttons .btn {
            flex: 1;
            min-width: 150px;
        }

        /* 加載動畫 */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(44, 62, 80, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 6px solid rgba(255,255,255,0.3);
            border-top: 6px solid var(--accent-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loading-text {
            color: white;
            margin-top: 20px;
            font-size: 18px;
            font-weight: 600;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 響應式調整 */
        @media (max-width: 768px) {
            .match-input-section, .qimen-data-section, .analysis-results {
                padding: 20px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                flex-direction: column;
                gap: 20px;
            }
            
            .prediction-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .half-points {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .prediction-cards {
                grid-template-columns: 1fr;
            }
            
            .results-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 返回導航 -->
        <div class="back-nav">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                返回主儀表板
            </a>
            <span class="nav-title">賽前預測系統</span>
        </div>

        <!-- 系統標題 -->
        <header class="page-header">
            <h1><i class="fas fa-crystal-ball"></i> 賽前AI預測分析</h1>
            <p class="subtitle">輸入比賽信息與奇門數據，生成AI分析報告</p>
        </header>

        <!-- 輸入表單區域 -->
        <div class="match-input-section">
            <div class="section-header">
                <i class="fas fa-futbol"></i>
                <h2>比賽基本信息</h2>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="matchId" class="required">球賽編號</label>
                    <input type="text" id="matchId" class="form-control" placeholder="例如: FB3200">
                </div>
                
                <div class="form-group">
                    <label for="homeTeam" class="required">主隊名稱</label>
                    <input type="text" id="homeTeam" class="form-control" placeholder="例如: 馬德里CFF女足">
                </div>
                
                <div class="form-group">
                    <label for="awayTeam" class="required">客隊名稱</label>
                    <input type="text" id="awayTeam" class="form-control" placeholder="例如: 特內里費女足">
                </div>
                
                <div class="form-group">
                    <label for="matchCategory" class="required">賽事類別</label>
                    <input type="text" id="matchCategory" class="form-control" placeholder="例如: 女子西班牙盃">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="matchDate" class="required">比賽日期</label>
                        <input type="date" id="matchDate" class="form-control">
                    </div>
                    
                    <div class="form-group">
                        <label for="matchTime" class="required">比賽時間</label>
                        <input type="time" id="matchTime" class="form-control" step="1">
                    </div>
                </div>
            </div>
        </div>

        <!-- 奇門數據輸入區域 -->
        <div class="qimen-data-section">
            <div class="section-header">
                <i class="fas fa-yin-yang"></i>
                <h2>奇門遁甲信息</h2>
            </div>
            
            <div class="form-group">
                <label for="qimenData" class="required">
                    <i class="fas fa-paste"></i> 
                    粘貼奇門數據（請按格式粘貼完整奇門信息）
                </label>
                <textarea id="qimenData" class="form-control textarea qimen-input" placeholder="請在此粘貼完整的奇門遁甲信息，格式如下：

公曆：2026年2月5日2時0分
農曆：2025年12月18日 陽遁3局
四柱：丙午 庚寅 庚戌 丁丑
時空亡：甲戌旬  申酉空　馬星：亥
值符：天輔星  值使：杜門

問測者落宮為兌宮(西方)
四害：空亡（深挖到坎宮）
乙天干臨：絕 位
庚天干臨：帝旺 位
天盤─ 乙
天盤寄宮─ 庚
地盤─ 壬
...（完整奇門數據）"></textarea>
                
                <div class="form-help">
                    <small><i class="fas fa-info-circle"></i> 提示：請直接粘貼甲方提供的完整奇門數據文本</small>
                </div>
            </div>
            
            <button id="analyzeBtn" class="btn-submit">
                <i class="fas fa-robot"></i>
                生成AI分析報告
            </button>
        </div>

        <!-- 分析結果區域 -->
        <div id="analysisResults" class="analysis-results">
            <div class="results-header">
                <h2><i class="fas fa-chart-bar"></i> AI預測分析報告</h2>
                <div class="match-id-badge" id="resultMatchId">FB3200</div>
            </div>
            
            <!-- 核心預測卡片 -->
            <div class="prediction-cards">
                <div class="prediction-card winner">
                    <div class="card-label">
                        <i class="fas fa-trophy"></i> 預測結果
                    </div>
                    <div class="card-value" id="predictionResult">客隊勝</div>
                    <div class="card-probability" id="predictionProbability">概率: 65%</div>
                </div>
                
                <div class="prediction-card corners">
                    <div class="card-label">
                        <i class="fas fa-flag"></i> 角球總數
                    </div>
                    <div class="card-value" id="predictionCorners">4-7</div>
                    <div class="card-probability">準確率: 85%</div>
                </div>
                
                <div class="prediction-card cards">
                    <div class="card-label">
                        <i class="fas fa-card"></i> 黃牌數
                    </div>
                    <div class="card-value" id="predictionCards">3-5</div>
                    <div class="card-probability">V5.1I算法</div>
                </div>
                
                <div class="prediction-card possession">
                    <div class="card-label">
                        <i class="fas fa-percentage"></i> 控球率
                    </div>
                    <div class="card-value" id="predictionPossession">52%:48%</div>
                    <div class="card-probability">客隊稍優</div>
                </div>
            </div>
            
            <!-- 上半場分析 -->
            <div class="half-analysis">
                <h3><i class="fas fa-clock"></i> 上半場分析</h3>
                <ul class="half-points" id="firstHalfAnalysis">
                    <!-- 動態生成 -->
                </ul>
            </div>
            
            <!-- 下半場分析 -->
            <div class="half-analysis">
                <h3><i class="fas fa-clock"></i> 下半場分析</h3>
                <ul class="half-points" id="secondHalfAnalysis">
                    <!-- 動態生成 -->
                </ul>
            </div>
            
            <!-- 奇門格局亮點 -->
            <div class="qimen-highlights">
                <h3><i class="fas fa-star"></i> 奇門格局關鍵發現</h3>
                <div class="highlight-grid" id="qimenHighlights">
                    <!-- 動態生成 -->
                </div>
            </div>
            
            <!-- 操作按鈕 -->
            <div class="action-buttons">
                <button id="saveReport" class="btn btn-primary">
                    <i class="fas fa-save"></i> 保存報告
                </button>
                <button id="exportPDF" class="btn btn-secondary">
                    <i class="fas fa-file-pdf"></i> 導出PDF
                </button>
                <button id="clearForm" class="btn btn-accent">
                    <i class="fas fa-redo"></i> 新分析
                </button>
            </div>
        </div>

        <!-- 加載動畫 -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner"></div>
            <div class="loading-text">AI正在分析奇門格局...</div>
        </div>
    </div>

    <!-- JavaScript文件 -->
    <script src="script.js"></script>
    <script src="qimen-analyser.js"></script>
    <script src="prediction-engine.js"></script>
    <script>
        // 賽前預測頁面專用邏輯
        document.addEventListener('DOMContentLoaded', function() {
            console.log('賽前預測頁面加載完成');
            
            // 設置默認日期為今天
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('matchDate').value = today;
            
            // 分析按鈕點擊事件
            document.getElementById('analyzeBtn').addEventListener('click', analyzeMatch);
            
            // 保存報告按鈕
            document.getElementById('saveReport').addEventListener('click', saveAnalysisReport);
            
            // 導出PDF按鈕
            document.getElementById('exportPDF').addEventListener('click', exportToPDF);
            
            // 清空表單按鈕
            document.getElementById('clearForm').addEventListener('click', clearForm);
            
            // 示例：載入範本數據
            loadExampleData();
        });
        
        // 載入示例數據（測試用）
        function loadExampleData() {
            // 從URL參數判斷是否需要載入示例
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('example') === '1') {
                document.getElementById('matchId').value = 'FB3200';
                document.getElementById('homeTeam').value = '馬德里CFF女足';
                document.getElementById('awayTeam').value = '特內里費女足';
                document.getElementById('matchCategory').value = '女子西班牙盃';
                document.getElementById('matchDate').value = '2026-02-05';
                document.getElementById('matchTime').value = '02:00';
                
                // 示例奇門數據（簡化版）
                const exampleQimen = `公曆：2026年2月5日2時0分
農曆：2025年12月18日 陽遁3局
四柱：丙午 庚寅 庚戌 丁丑
時空亡：甲戌旬  申酉空　馬星：亥
值符：天輔星  值使：杜門

問測者落宮為兌宮(西方)
四害：空亡（深挖到坎宮）
乙天干臨：絕 位
庚天干臨：帝旺 位
天盤─ 乙
天盤寄宮─ 庚
地盤─ 壬
天盤＋天盤寄宮─ 乙 + 庚：日奇被刑
天盤＋地盤─ 乙 + 壬：日奇入地
天盤寄宮＋地盤─ 庚 + 壬：小格（移蕩格）
八門─ 杜門
八門+天盤─ 杜 + 乙：飛來橫禍(訴訟)
九星─ 天芮星
八神─ 太陰

乾宮(西北方)
四害：景門門迫
壬天干臨：冠帶 臨官 馬星位
天盤─ 壬
地盤─ 辛
天盤＋地盤─ 壬 + 辛：騰蛇相纏
八門─ 景門
八門+天盤─ 景 + 壬：因賊牽連
九星─ 天柱星
八神─ 六合

坎宮(北方)
四害：死門門迫
辛天干臨：長生 位
天盤─ 辛
地盤─ 丙
天盤＋地盤─ 辛 + 丙：幹合悖師
八門─ 死門
八門+天盤─ 死 + 辛：盜賊猖狂，失物難回
九星─ 天心星
八神─ 白虎`;
                
                document.getElementById('qimenData').value = exampleQimen;
                
                systemUtils.showAlert('範例載入', '已載入FB3200範例數據，可直接點擊分析按鈕', 'info');
            }
        }
        
        // 分析比賽函數
        async function analyzeMatch() {
            // 驗證輸入數據
            if (!validateForm()) {
                return;
            }
            
            // 顯示加載動畫
            const loading = document.getElementById('loadingOverlay');
            loading.style.display = 'flex';
            
            try {
                // 收集表單數據
                const matchData = {
                    matchId: document.getElementById('matchId').value.trim(),
                    homeTeam: document.getElementById('homeTeam').value.trim(),
                    awayTeam: document.getElementById('awayTeam').value.trim(),
                    matchCategory: document.getElementById('matchCategory').value.trim(),
                    matchDate: document.getElementById('matchDate').value,
                    matchTime: document.getElementById('matchTime').value,
                    matchTimeFull: `${document.getElementById('matchDate').value} ${document.getElementById('matchTime').value}:00`,
                    qimenData: document.getElementById('qimenData').value.trim()
                };
                
                // 解析奇門數據
                const qimenResult = await window.qimenAnalyser.parseQimenData(matchData.qimenData);
                
                // 使用預測引擎生成預測
                const prediction = await window.predictionEngine.generatePrediction(qimenResult, matchData);
                
                // 顯示分析結果
                displayAnalysisResults(matchData, prediction);
                
                // 顯示結果區域
                document.getElementById('analysisResults').style.display = 'block';
                
                // 滾動到結果區域
                document.getElementById('analysisResults').scrollIntoView({ behavior: 'smooth' });
                
                systemUtils.showAlert('分析完成', 'AI已完成奇門格局分析並生成預測報告', 'success');
                
            } catch (error) {
                console.error('分析過程中出現錯誤:', error);
                systemUtils.showAlert('分析錯誤', '分析過程中出現錯誤，請檢查奇門數據格式', 'error');
            } finally {
                // 隱藏加載動畫
                loading.style.display = 'none';
            }
        }
        
        // 驗證表單數據
        function validateForm() {
            const requiredFields = [
                'matchId', 'homeTeam', 'awayTeam', 'matchCategory', 
                'matchDate', 'matchTime', 'qimenData'
            ];
            
            let isValid = true;
            let errorMessages = [];
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    isValid = false;
                    field.style.borderColor = 'var(--danger-color)';
                    errorMessages.push(`${field.previousElementSibling?.textContent || fieldId} 不能為空`);
                } else {
                    field.style.borderColor = 'var(--border-color)';
                }
            });
            
            if (!isValid) {
                const errorMessage = errorMessages.join('\n');
                systemUtils.showAlert('表單驗證失敗', errorMessage, 'error');
            }
            
            return isValid;
        }
        
        // 顯示分析結果
        function displayAnalysisResults(matchData, prediction) {
            // 更新標題
            document.getElementById('resultMatchId').textContent = matchData.matchId;
            
            // 更新核心預測卡片
            document.getElementById('predictionResult').textContent = prediction.result;
            document.getElementById('predictionProbability').textContent = `概率: ${prediction.probability}%`;
            document.getElementById('predictionCorners').textContent = prediction.corners;
            document.getElementById('predictionCards').textContent = prediction.cards;
            document.getElementById('predictionPossession').textContent = prediction.possession;
            
            // 更新上半場分析
            const firstHalfList = document.getElementById('firstHalfAnalysis');
            firstHalfList.innerHTML = '';
            prediction.firstHalfAnalysis.forEach(point => {
                const li = document.createElement('li');
                li.textContent = point;
                firstHalfList.appendChild(li);
            });
            
            // 更新下半場分析
            const secondHalfList = document.getElementById('secondHalfAnalysis');
            secondHalfList.innerHTML = '';
            prediction.secondHalfAnalysis.forEach(point => {
                const li = document.createElement('li');
                li.textContent = point;
                secondHalfList.appendChild(li);
            });
            
            // 更新奇門格局亮點
            const highlightsGrid = document.getElementById('qimenHighlights');
            highlightsGrid.innerHTML = '';
            prediction.highlights.forEach(highlight => {
                const div = document.createElement('div');
                div.className = 'highlight-item';
                div.innerHTML = `
                    <div class="highlight-title">
                        <span class="icon ${highlight.type}">
                            <i class="fas ${highlight.icon}"></i>
                        </span>
                        ${highlight.title}
                    </div>
                    <div class="highlight-content">${highlight.content}</div>
                `;
                highlightsGrid.appendChild(div);
            });
        }
        
        // 保存分析報告
        async function saveAnalysisReport() {
            const matchId = document.getElementById('matchId').value.trim();
            if (!matchId) {
                systemUtils.showAlert('保存失敗', '請先完成分析再保存報告', 'warning');
                return;
            }
            
            try {
                // 收集報告數據
                const reportData = {
                    matchId: matchId,
                    homeTeam: document.getElementById('homeTeam').value.trim(),
                    awayTeam: document.getElementById('awayTeam').value.trim(),
                    matchCategory: document.getElementById('matchCategory').value.trim(),
                    matchTime: `${document.getElementById('matchDate').value} ${document.getElementById('matchTime').value}:00`,
                    analysisTime: new Date().toISOString(),
                    predictionResult: document.getElementById('predictionResult').textContent,
                    predictionProbability: document.getElementById('predictionProbability').textContent,
                    predictionCorners: document.getElementById('predictionCorners').textContent,
                    predictionCards: document.getElementById('predictionCards').textContent,
                    predictionPossession: document.getElementById('predictionPossession').textContent
                };
                
                // 這裡應該調用CSV保存功能
                // await saveReportToCSV(reportData);
                
                systemUtils.showAlert('保存成功', `分析報告已保存到本地數據庫 (${matchId})`, 'success');
                
            } catch (error) {
                console.error('保存報告時出錯:', error);
                systemUtils.showAlert('保存失敗', '保存報告時出現錯誤', 'error');
            }
        }
        
        // 導出PDF（模擬功能）
        function exportToPDF() {
            const matchId = document.getElementById('matchId').value.trim();
            if (!matchId) {
                systemUtils.showAlert('導出失敗', '請先完成分析再導出報告', 'warning');
                return;
            }
            
            systemUtils.showAlert('PDF導出', 'PDF導出功能將在下一版本實現\n報告內容已複製到剪貼板', 'info');
            
            // 模擬複製報告內容到剪貼板
            const reportContent = `己土玄學AI足球分析報告
================================
比賽編號: ${matchId}
分析時間: ${new Date().toLocaleString('zh-Hant')}
預測結果: ${document.getElementById('predictionResult').textContent}
概率: ${document.getElementById('predictionProbability').textContent}
角球預測: ${document.getElementById('predictionCorners').textContent}
黃牌預測: ${document.getElementById('predictionCards').textContent}
控球率預測: ${document.getElementById('predictionPossession').textContent}
================================`;
            
            navigator.clipboard.writeText(reportContent)
                .then(() => console.log('報告內容已複製到剪貼板'))
                .catch(err => console.error('複製失敗:', err));
        }
        
        // 清空表單
        function clearForm() {
            const confirmClear = confirm('確定要清空所有表單內容嗎？');
            if (confirmClear) {
                document.querySelectorAll('input, textarea').forEach(element => {
                    if (element.type !== 'button' && element.type !== 'submit') {
                        element.value = '';
                    }
                });
                
                document.getElementById('analysisResults').style.display = 'none';
                
                // 重置日期為今天
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('matchDate').value = today;
                
                systemUtils.showAlert('表單已清空', '所有表單內容已重置，可以開始新的分析', 'info');
            }
        }
    </script>
</body>
</html>