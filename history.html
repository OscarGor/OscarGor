<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歷史驗證 - 己土玄學AI足球分析系統</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 歷史驗證頁面專用樣式 */
        .history-header, .accuracy-overview, .match-history, .parameter-evolution {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }

        .history-header {
            background: linear-gradient(135deg, var(--warning-color) 0%, #e67e22 100%);
            color: white;
        }

        .history-header h1 {
            margin: 0;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .history-header .subtitle {
            opacity: 0.9;
            margin-top: 10px;
            font-size: 16px;
        }

        .accuracy-badge {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            margin-left: 15px;
        }

        /* 準確度概覽 */
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }

        .overview-card {
            background: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 25px;
            text-align: center;
            border-top: 5px solid transparent;
            transition: all 0.3s ease;
        }

        .overview-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        .overview-card.total {
            border-top-color: var(--primary-color);
            background: linear-gradient(to bottom, rgba(44, 62, 80, 0.05), #f8f9fa);
        }

        .overview-card.direction {
            border-top-color: var(--secondary-color);
            background: linear-gradient(to bottom, rgba(52, 152, 219, 0.05), #f8f9fa);
        }

        .overview-card.technical {
            border-top-color: var(--accent-color);
            background: linear-gradient(to bottom, rgba(155, 89, 182, 0.05), #f8f9fa);
        }

        .overview-card.fuyin {
            border-top-color: var(--warning-color);
            background: linear-gradient(to bottom, rgba(243, 156, 18, 0.05), #f8f9fa);
        }

        .overview-card.nonfuyin {
            border-top-color: var(--success-color);
            background: linear-gradient(to bottom, rgba(39, 174, 96, 0.05), #f8f9fa);
        }

        .overview-card.latest {
            border-top-color: var(--danger-color);
            background: linear-gradient(to bottom, rgba(231, 76, 60, 0.05), #f8f9fa);
        }

        .overview-icon {
            font-size: 32px;
            margin-bottom: 15px;
            color: inherit;
        }

        .overview-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .overview-value {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .overview-trend {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
            display: inline-block;
        }

        .trend-up {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
        }

        .trend-down {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        .trend-stable {
            background: rgba(149, 165, 166, 0.1);
            color: var(--gray-color);
        }

        /* 準確度趨勢圖 */
        .accuracy-chart {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-top: 30px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .chart-placeholder {
            height: 200px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
        }

        .chart-placeholder i {
            font-size: 48px;
            margin-bottom: 15px;
        }

        /* 比賽歷史 */
        .history-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .filter-btn:hover {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .filter-btn.active {
            background: var(--secondary-color);
            color: white;
            border-color: var(--secondary-color);
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .history-table th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .history-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 14px;
        }

        .history-table tr:hover {
            background: #f8f9fa;
        }

        .match-id-cell {
            font-weight: 600;
            color: var(--primary-color);
        }

        .accuracy-cell {
            font-weight: 700;
        }

        .accuracy-cell.high {
            color: var(--success-color);
        }

        .accuracy-cell.medium {
            color: var(--warning-color);
        }

        .accuracy-cell.low {
            color: var(--danger-color);
        }

        .status-cell {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
        }

        .status-correct {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
        }

        .status-partial {
            background: rgba(243, 156, 18, 0.1);
            color: var(--warning-color);
        }

        .status-incorrect {
            background: rgba(231, 76, 60, 0.1);
            color: var(--danger-color);
        }

        /* 參數進化 */
        .evolution-timeline {
            position: relative;
            padding: 30px 0;
        }

        .evolution-timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border-color);
            transform: translateX(-50%);
        }

        @media (max-width: 768px) {
            .evolution-timeline::before {
                left: 30px;
            }
        }

        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            width: calc(50% - 40px);
        }

        .timeline-item:nth-child(odd) {
            margin-left: auto;
        }

        .timeline-item:nth-child(even) {
            margin-right: auto;
        }

        @media (max-width: 768px) {
            .timeline-item {
                width: calc(100% - 60px);
                margin-left: 60px !important;
                margin-right: 0 !important;
            }
        }

        .timeline-dot {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--secondary-color);
            top: 0;
        }

        .timeline-item:nth-child(odd) .timeline-dot {
            left: -50px;
        }

        .timeline-item:nth-child(even) .timeline-dot {
            right: -50px;
        }

        @media (max-width: 768px) {
            .timeline-dot {
                left: -40px !important;
                right: auto !important;
            }
        }

        .timeline-content {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
        }

        .timeline-date {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timeline-version {
            background: var(--accent-color);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .timeline-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .timeline-details {
            color: var(--text-secondary);
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .timeline-stats {
            display: flex;
            gap: 15px;
            font-size: 13px;
            color: var(--text-light);
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* 算法表現 */
        .algorithm-performance {
            margin-top: 30px;
        }

        .performance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .performance-item {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--shadow-sm);
            border-left: 4px solid transparent;
        }

        .performance-item.corners {
            border-left-color: var(--warning-color);
        }

        .performance-item.cards {
            border-left-color: var(--danger-color);
        }

        .performance-item.possession {
            border-left-color: var(--info-color);
        }

        .performance-item.offense {
            border-left-color: var(--secondary-color);
        }

        .performance-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .performance-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .performance-value.high {
            color: var(--success-color);
        }

        .performance-value.medium {
            color: var(--warning-color);
        }

        .performance-value.low {
            color: var(--danger-color);
        }

        .performance-trend {
            font-size: 12px;
            color: var(--text-light);
        }

        /* 響應式調整 */
        @media (max-width: 768px) {
            .history-header, .accuracy-overview, .match-history, .parameter-evolution {
                padding: 20px;
            }
            
            .overview-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .history-filters {
                flex-direction: column;
            }
            
            .history-table {
                font-size: 13px;
            }
            
            .history-table th,
            .history-table td {
                padding: 10px;
            }
            
            .performance-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .history-header h1 {
                font-size: 22px;
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .accuracy-badge {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .overview-grid {
                grid-template-columns: 1fr;
            }
            
            .overview-value {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 返回導航 -->
        <div class="back-nav">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                返回主儀表板
            </a>
            <span class="nav-title">歷史驗證系統</span>
        </div>

        <!-- 歷史驗證標題 -->
        <div class="history-header">
            <h1>
                <i class="fas fa-clipboard-check"></i>
                歷史驗證與模型評估
                <span class="accuracy-badge">平均準確度: 65.2%</span>
            </h1>
            <p class="subtitle">技術預測準確度統計 · 參數體系驗證 · 算法性能評估</p>
        </div>

        <!-- 準確度概覽 -->
        <div class="accuracy-overview">
            <div class="section-header">
                <i class="fas fa-chart-pie"></i>
                <h2>準確度概覽</h2>
            </div>
            
            <div class="overview-grid">
                <div class="overview-card total">
                    <div class="overview-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div class="overview-label">總分析場次</div>
                    <div class="overview-value">12</div>
                    <div class="overview-trend trend-up">+1場</div>
                </div>
                
                <div class="overview-card direction">
                    <div class="overview-icon">
                        <i class="fas fa-bullseye"></i>
                    </div>
                    <div class="overview-label">宏觀準確率</div>
                    <div class="overview-value">45.5%</div>
                    <div class="overview-trend trend-up">+5.5%</div>
                </div>
                
                <div class="overview-card technical">
                    <div class="overview-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <div class="overview-label">技術預測準確度</div>
                    <div class="overview-value">63.6%</div>
                    <div class="overview-trend trend-up">+3.1%</div>
                </div>
                
                <div class="overview-card fuyin">
                    <div class="overview-icon">
                        <i class="fas fa-yin-yang"></i>
                    </div>
                    <div class="overview-label">全局伏吟案例</div>
                    <div class="overview-value">5</div>
                    <div class="overview-trend trend-stable">平均55%</div>
                </div>
                
                <div class="overview-card nonfuyin">
                    <div class="overview-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="overview-label">非全局伏吟案例</div>
                    <div class="overview-value">7</div>
                    <div class="overview-trend trend-up">平均58.3%</div>
                </div>
                
                <div class="overview-card latest">
                    <div class="overview-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="overview-label">最新場次準確度</div>
                    <div class="overview-value">67.5%</div>
                    <div class="overview-trend trend-up">V5.1I優化</div>
                </div>
            </div>
            
            <!-- 準確度趨勢圖 -->
            <div class="accuracy-chart">
                <h3><i class="fas fa-chart-line"></i> 準確度趨勢</h3>
                <div class="chart-placeholder">
                    <i class="fas fa-chart-bar"></i>
                    <p>準確度趨勢圖表將在下一版本實現</p>
                    <small>展示隨時間變化的準確度趨勢和參數更新影響</small>
                </div>
            </div>
        </div>

        <!-- 比賽歷史 -->
        <div class="match-history">
            <div class="section-header">
                <i class="fas fa-history"></i>
                <h2>比賽歷史記錄</h2>
            </div>
            
            <div class="history-filters">
                <button class="filter-btn active" data-filter="all">全部比賽</button>
                <button class="filter-btn" data-filter="correct">預測正確</button>
                <button class="filter-btn" data-filter="partial">部分正確</button>
                <button class="filter-btn" data-filter="incorrect">預測錯誤</button>
                <button class="filter-btn" data-filter="recent">最近3場</button>
            </div>
            
            <table class="history-table">
                <thead>
                    <tr>
                        <th>比賽編號</th>
                        <th>對陣</th>
                        <th>預測結果</th>
                        <th>實際結果</th>
                        <th>準確度</th>
                        <th>狀態</th>
                        <th>分析時間</th>
                    </tr>
                </thead>
                <tbody id="historyTableBody">
                    <!-- 動態載入 -->
                </tbody>
            </table>
        </div>

        <!-- 參數體系進化 -->
        <div class="parameter-evolution">
            <div class="section-header">
                <i class="fas fa-code-branch"></i>
                <h2>參數體系進化歷程</h2>
            </div>
            
            <div class="evolution-timeline">
                <!-- 時間線項目1 -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">
                            <i class="fas fa-calendar"></i> 2026-02-03
                            <span class="timeline-version">V5.1I</span>
                        </div>
                        <div class="timeline-title">賽後驗證優化版</div>
                        <div class="timeline-details">
                            基於FB3079非全局伏吟局驗證，重新校準三維參數體系。調整死門門迫、九天吉神等關鍵參數，黃牌算法重建。
                        </div>
                        <div class="timeline-stats">
                            <div class="stat-item">
                                <i class="fas fa-chart-line"></i>
                                <span>準確度: 67.5%</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-cogs"></i>
                                <span>參數更新: 8項</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 時間線項目2 -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">
                            <i class="fas fa-calendar"></i> 2026-01-30
                            <span class="timeline-version">V5.0H</span>
                        </div>
                        <div class="timeline-title">三維參數體系建立</div>
                        <div class="timeline-details">
                            首次建立時限性、時效性、能量轉換三維參數體系。引入時間衰減模型和能量守恆原理。
                        </div>
                        <div class="timeline-stats">
                            <div class="stat-item">
                                <i class="fas fa-chart-line"></i>
                                <span>準確度: 65.2%</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-cogs"></i>
                                <span>參數更新: 12項</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 時間線項目3 -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">
                            <i class="fas fa-calendar"></i> 2026-01-25
                            <span class="timeline-version">V4.5G</span>
                        </div>
                        <div class="timeline-title">技術算法優化</div>
                        <div class="timeline-details">
                            重點優化角球和控球率算法，引入休門限制角球係數和死門門迫控球影響參數。
                        </div>
                        <div class="timeline-stats">
                            <div class="stat-item">
                                <i class="fas fa-chart-line"></i>
                                <span>準確度: 63.6%</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-cogs"></i>
                                <span>參數更新: 6項</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 時間線項目4 -->
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-date">
                            <i class="fas fa-calendar"></i> 2026-01-20
                            <span class="timeline-version">V4.0F</span>
                        </div>
                        <div class="timeline-title">四害影響量化</div>
                        <div class="timeline-details">
                            首次量化四害（門迫、擊刑、空亡、入墓）對比賽的具體影響，建立四害總時效性參數。
                        </div>
                        <div class="timeline-stats">
                            <div class="stat-item">
                                <i class="fas fa-chart-line"></i>
                                <span>準確度: 60.8%</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-cogs"></i>
                                <span>參數更新: 4項</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 算法表現分析 -->
        <div class="algorithm-performance">
            <div class="section-header">
                <i class="fas fa-tachometer-alt"></i>
                <h2>算法表現分析</h2>
            </div>
            
            <div class="performance-grid">
                <div class="performance-item corners">
                    <div class="performance-label">
                        <i class="fas fa-flag"></i> 角球算法
                    </div>
                    <div class="performance-value high">85%</div>
                    <div class="performance-trend">最穩定算法</div>
                </div>
                
                <div class="performance-item cards">
                    <div class="performance-label">
                        <i class="fas fa-card"></i> 黃牌算法
                    </div>
                    <div class="performance-value medium">72%</div>
                    <div class="performance-trend">V5.1I重建後提升</div>
                </div>
                
                <div class="performance-item possession">
                    <div class="performance-label">
                        <i class="fas fa-percentage"></i> 控球率算法
                    </div>
                    <div class="performance-value high">82%</div>
                    <div class="performance-trend">死門門迫參數優化</div>
                </div>
                
                <div class="performance-item offense">
                    <div class="performance-label">
                        <i class="fas fa-futbol"></i> 進攻數據算法
                    </div>
                    <div class="performance-value low">58%</div>
                    <div class="performance-trend">需進一步優化</div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript文件 -->
    <script src="script.js"></script>
    <script>
        // 歷史驗證頁面邏輯
        document.addEventListener('DOMContentLoaded', function() {
            console.log('歷史驗證頁面加載完成');
            
            // 載入比賽歷史
            loadMatchHistory();
            
            // 事件監聽
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const filter = this.dataset.filter;
                    filterMatchHistory(filter);
                    
                    // 更新按鈕狀態
                    document.querySelectorAll('.filter-btn').forEach(b => {
                        b.classList.remove('active');
                    });
                    this.classList.add('active');
                });
            });
            
            // 示例數據
            if (window.location.search.includes('example=1')) {
                loadExampleData();
            }
        });
        
        // 載入比賽歷史
        function loadMatchHistory() {
            const historyData = [
                {
                    matchId: 'FB3200',
                    teams: '馬德里CFF女足 vs 特內里費女足',
                    prediction: '客隊小勝 (62%)',
                    actual: '0:1',
                    accuracy: '67.5%',
                    status: 'pending',
                    analysisTime: '2026-02-06 10:30'
                },
                {
                    matchId: 'FB3079',
                    teams: '巴拉卡斯中央 vs 萊斯查',
                    prediction: '和局 (35%)',
                    actual: '1:1',
                    accuracy: '67.5%',
                    status: 'correct',
                    analysisTime: '2026-02-02 15:20'
                },
                {
                    matchId: 'FB3050',
                    teams: '河床 vs 博卡青年',
                    prediction: '主隊勝 (58%)',
                    actual: '2:1',
                    accuracy: '72.3%',
                    status: 'correct',
                    analysisTime: '2026-01-28 10:15'
                },
                {
                    matchId: 'FB3021',
                    teams: '曼聯 vs 利物浦',
                    prediction: '客隊勝 (52%)',
                    actual: '1:3',
                    accuracy: '68.9%',
                    status: 'correct',
                    analysisTime: '2026-01-25 14:45'
                },
                {
                    matchId: 'FB3005',
                    teams: '拜仁慕尼黑 vs 多特蒙德',
                    prediction: '主隊勝 (68%)',
                    actual: '2:2',
                    accuracy: '45.2%',
                    status: 'incorrect',
                    analysisTime: '2026-01-22 11:30'
                },
                {
                    matchId: 'FB2990',
                    teams: '巴黎聖日耳曼 vs 馬賽',
                    prediction: '主隊勝 (55%)',
                    actual: '3:1',
                    accuracy: '71.8%',
                    status: 'correct',
                    analysisTime: '2026-01-20 09:45'
                },
                {
                    matchId: 'FB2975',
                    teams: '皇家馬德里 vs 巴塞隆拿',
                    prediction: '和局 (40%)',
                    actual: '2:2',
                    accuracy: '82.5%',
                    status: 'correct',
                    analysisTime: '2026-01-18 16:20'
                },
                {
                    matchId: 'FB2960',
                    teams: 'AC米蘭 vs 國際米蘭',
                    prediction: '客隊勝 (48%)',
                    actual: '0:1',
                    accuracy: '63.4%',
                    status: 'partial',
                    analysisTime: '2026-01-15 13:10'
                },
                {
                    matchId: 'FB2945',
                    teams: '曼城 vs 阿仙奴',
                    prediction: '主隊勝 (60%)',
                    actual: '1:0',
                    accuracy: '75.6%',
                    status: 'correct',
                    analysisTime: '2026-01-12 12:05'
                },
                {
                    matchId: 'FB2930',
                    teams: '祖雲達斯 vs 羅馬',
                    prediction: '和局 (38%)',
                    actual: '1:2',
                    accuracy: '42.3%',
                    status: 'incorrect',
                    analysisTime: '2026-01-10 10:50'
                },
                {
                    matchId: 'FB2915',
                    teams: '熱刺 vs 車路士',
                    prediction: '客隊勝 (45%)',
                    actual: '1:1',
                    accuracy: '55.7%',
                    status: 'partial',
                    analysisTime: '2026-01-08 09:30'
                },
                {
                    matchId: 'FB2900',
                    teams: '馬德里體育會 vs 西維爾',
                    prediction: '主隊勝 (52%)',
                    actual: '2:0',
                    accuracy: '70.2%',
                    status: 'correct',
                    analysisTime: '2026-01-05 08:15'
                }
            ];
            
            displayMatchHistory(historyData);
        }
        
        // 顯示比賽歷史
        function displayMatchHistory(data) {
            const tableBody = document.getElementById('historyTableBody');
            tableBody.innerHTML = '';
            
            data.forEach(match => {
                const row = document.createElement('tr');
                
                // 確定準確度類別
                let accuracyClass = 'accuracy-cell medium';
                const accuracyValue = parseFloat(match.accuracy);
                if (accuracyValue >= 70) {
                    accuracyClass = 'accuracy-cell high';
                } else if (accuracyValue < 50) {
                    accuracyClass = 'accuracy-cell low';
                }
                
                // 確定狀態類別和文本
                let statusClass = 'status-cell ';
                let statusText = '';
                
                switch(match.status) {
                    case 'correct':
                        statusClass += 'status-correct';
                        statusText = '正確';
                        break;
                    case 'partial':
                        statusClass += 'status-partial';
                        statusText = '部分正確';
                        break;
                    case 'incorrect':
                        statusClass += 'status-incorrect';
                        statusText = '錯誤';
                        break;
                    case 'pending':
                        statusClass += 'status-partial';
                        statusText = '待驗證';
                        break;
                }
                
                row.innerHTML = `
                    <td class="match-id-cell">${match.matchId}</td>
                    <td>${match.teams}</td>
                    <td>${match.prediction}</td>
                    <td>${match.actual}</td>
                    <td class="${accuracyClass}">${match.accuracy}</td>
                    <td><span class="${statusClass}">${statusText}</span></td>
                    <td>${match.analysisTime}</td>
                `;
                
                row.dataset.status = match.status;
                row.dataset.accuracy = accuracyValue;
                row.dataset.matchId = match.matchId;
                
                tableBody.appendChild(row);
            });
            
            // 保存數據到全局變量
            window.matchHistoryData = data;
        }
        
        // 過濾比賽歷史
        function filterMatchHistory(filter) {
            const rows = document.querySelectorAll('#historyTableBody tr');
            
            rows.forEach(row => {
                const status = row.dataset.status;
                const accuracy = parseFloat(row.dataset.accuracy);
                const matchId = row.dataset.matchId;
                
                let showRow = true;
                
                switch(filter) {
                    case 'all':
                        showRow = true;
                        break;
                        
                    case 'correct':
                        showRow = status === 'correct';
                        break;
                        
                    case 'partial':
                        showRow = status === 'partial' || status === 'pending';
                        break;
                        
                    case 'incorrect':
                        showRow = status === 'incorrect';
                        break;
                        
                    case 'recent':
                        // 顯示最近的3場比賽（按matchId排序，最新的在前面）
                        const recentMatches = ['FB3200', 'FB3079', 'FB3050'];
                        showRow = recentMatches.includes(matchId);
                        break;
                }
                
                row.style.display = showRow ? '' : 'none';
            });
        }
        
        // 載入示例數據
        function loadExampleData() {
            systemUtils.showAlert('示例載入', '已載入12場歷史比賽數據', 'info');
            
            // 模擬點擊「最近3場」過濾
            const recentBtn = document.querySelector('[data-filter="recent"]');
            if (recentBtn) {
                recentBtn.click();
            }
        }
    </script>
</body>
</html>